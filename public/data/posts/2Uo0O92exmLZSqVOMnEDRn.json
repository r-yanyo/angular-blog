{
  "id": "2Uo0O92exmLZSqVOMnEDRn",
  "title": "ブログを最適化する",
  "date": "2017-11-23",
  "content": "<p><a href=\"http://kuxumarin.hatenablog.com/entry/2017/11/15/dev.to%E3%81%A8%E9%98%BF%E9%83%A8%E5%AF%9B%E3%81%AE%E3%83%9B%E3%83%BC%E3%83%A0%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%A9%E3%81%A3%E3%81%A1%E3%81%8C%E9%80%9F%E3%81%84%E3%81%A7%E3%81%99%E3%81%8B%EF%BC%9F\">dev.to と阿部寛のホームページどっちが速いですか？</a>というめっちゃ面白い記事を見ました。</p>\n<p>その記事では Google の<a href=\"https://developers.google.com/speed/pagespeed/insights/?hl=ja\">PageSpeed Insights</a>という Web ページを評価するためのツールを利用して、dev.to と阿部寛のホームページを比較しています。</p>\n<p>ということでこのブログの評価を見てみます。</p>\n<p><img src=\"//images.ctfassets.net/wcj80e9o9v1k/25uasj80H0jQNprsfEiypr/d7569e3f839bd4d1c9c73b2d155db76a/pageinsight-bef.png\" alt=\"pageinsight-bef\"></p>\n<p>スコアは<strong>41</strong>と結構酷くなってしまいました。この記事を書くちょっと前に計測したときは 90 超えていたのに、記事やコードを増やしたら一気に悪くなってしまいました。(ちなみに阿部寛のホームページのスコアは 92 らしい）</p>\n<p>で、この<a href=\"https://developers.google.com/speed/pagespeed/insights/?hl=ja\">PageSpeed Insights</a>は Web ページが遅い原因も教えてくれて、このブログでは<strong>コンテンツを gzip 圧縮していないよ</strong>とのことでした。コンテンツっていうのは HTML とか JavaScript とか CSS とか画像とか、とにかく全部です。</p>\n<p>このブログのサーバサイドは<a href=\"http://expressjs.com/\">Express</a>で書かれていて、その<a href=\"http://expressjs.com/ja/advanced/best-practice-performance.html\">ドキュメント</a>を見ると、以下のようにして gzip 圧縮をしたコンテンツを送信してくれるそうです。</p>\n<pre><code class=\"language-js\">var compression = require(&#39;compression&#39;)\nvar express = require(&#39;express&#39;)\nvar app = express()\napp.use(compression())\n</code></pre>\n<p>で、実際にやってみると、</p>\n<p><img src=\"//images.ctfassets.net/wcj80e9o9v1k/4QsLoX0ddedWGmkefpYyna/82575931326394ee895577292e3f5cd9/pageinsight-aft.png\" alt=\"pageinsight-aft\"></p>\n<p>となり、スコアは<strong>92</strong>まで上昇しました。他にも遅い原因として<strong>キャッシュを利用していない</strong>ことが分かったので、それは後で解決します。たぶん。</p>\n"
}